## 交换与转发的区别
交换英文是switch，转发英文是forward 。switch 是切换的意思，举个例子，一辆火车去北京，经过道岔，道岔工一看去北京，马上切换铁轨从一个道岔切换另外一个，路就通了，这里面没有有查看地址的过程，但是没有卸货的过程，电路交换就是最明显的交换，而forward是什么？是快递，卸下来，看地址，然后扔到另外一个车，有存储转发的意味。当然简单理解，交换是二层，转发是三层，也ok了，但是这并不是其真正的本意

## 二层交换机的基本原理
1、当交换机从某个端口收到一个数据包，它先读取包头中的源MAC地址，这样它就知道源MAC地址的机器是连在哪个端口上的。
2、再去读取包头中的目的MAC地址，并在地址表中查找相应的端口。
3、如表中有与这目的MAC地址对应的端口，把数据包直接复制到这端口上。
4、如表中找不到相应的端口则把数据包广播到所有端口上，当目的机器对源机器回应时，交换机又可以学习目的MAC地址与哪个端口对应，在下次传送数据时就不再需要对所有端口进行广播了。不断的循环这个过程，对于全网的MAC地址信息都可以学习到，二层交换机就是这样建立和维护它自己的地址表。

## 网卡的功能
网卡主要是物理层与数据链路层的功能
1. 数据的封装与解封
2. 链路管理
3. 数据编码与译码

## 路由表（RIB)与转发表(FIB)、ARP表区别
ARP表：ip地址与mac地址的映射关系
FIB表（转发表）：存放在交换机中，表示MAC地址与端口的映射关系
RIB表（路由表）：存放在路由器中，反应IP与接口的映射关系

路由表关键字段：
destination：目的地址，用来标识IP包的目的地址或者目的网络。
mask：网络掩码，与目的地址一起标识目的主机或者路由器所在的网段的地址。
pre：标识路由加入IP路由表的优先级。可能到达一个目的地有多条路由，但是优先级的存在让他们先选择优先级高的路由进行利用。
cost：路由开销，当到达一个目的地的多个路由优先级相同时，路由开销最小的将成为最优路由。
interface：输出接口，说明IP包将从该路由器哪个接口转发。
nexthop：下一跳IP地址，说明IP包所经过的下一个路由器。

## ARP地址解析协议
就是要通过IP地址获取MAC地址。获取的方法是ARP高速缓存表,里面记录着IP地址与MAC地址的映射关系；当ARP高速缓存表没有这个映射关系时，会发起ARP请求，去获取； 
详细流程如下：
* 在同一个网络上，假设主机B刚入网，A的arp缓存表内无B的信息。那么ARP的协议的流程，
1. A 就会在局域网内发起广播，我是A,我的ip地址是“xx:xx:xx:xx”, mac地址是“xx:xx:xx:xx:xx”,我想知道目的IP为“xx:xx:xx:xx” 的MAC地址,广播报文的mac地址为 0xffffffff；
2. 同一局域网上的其他主机就会收到arp请求，发现自已的ip不匹配，则不处理；
3. B发现IP是匹配的，响应该arp,单播回答说，我是B,我的IP地址是ip地址是“xx:xx:xx:xx”, mac地址是“xx:xx:xx:xx:xx”；同时B的ARP 学习到了A的IP与地址的映射关系； 
4. A收到消息后，就将学习到的arp 存到高速缓存中； 

* 在不同网络上，需通过交换机转发时 A---->R1---->(B)----->R2---->C
1. A发给B时，A的arp学习到了R1的mac地址；
2. R1发起ARP，学到了B的信息；
3. A将信息发给R1，R1转发给B;
4. 若A是要发给C，同样的A先发给了R1, R1发给R2,R2发给C
** 在这整个过程中， ip的地址总是不改变； 但是mac地址会一直变化**

## RARP逆地址解析协议
通过MAC地址获取IP地址；同样是通过路由表反解析过来；现在RARP已经不在使用了； 

